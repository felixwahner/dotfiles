# Set default editor
Pry.config.editor = "vim"
#Pry.config.editor = "gvim --nofork"

Pry.config.prompt = proc do |obj, level, _|
  prompt = "\e[1;37m"
  prompt << "#{Rails.version}@" if defined?(Rails)
  prompt << "#{RUBY_VERSION}"
  "#{prompt} (#{obj}) >\e[0m "
end

# Set color red for exceptions
Pry.config.exception_handler = proc do |output, exception, _|
  output.puts "\e[31m#{exception.class}: #{exception.message}"
  output.puts "from #{exception.backtrace.first}\e[0m"
end

# Try to load awesome_print
begin
  require "awesome_print"
  Pry.config.print = proc {|output, value| Pry::Helpers::BaseHelpers.stagger_output("=> #{value.ai}", output)}
rescue LoadError => e
  warn "=> Unable to load gem 'awesome_print'!"
  puts "If you're calling from Rails you need to put this gem on your Gemfile."
end

